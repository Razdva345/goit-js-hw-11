{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"42056951-259306f3e2aef1f0902f3daf3\";\nconst searchForm = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loaderContainer = document.querySelector(\".loader-container\");\n\nsearchForm.addEventListener(\"submit\", handleSearch);\nhideLoader(loaderContainer);\n\nfunction handleSearch(event) {\n\tevent.preventDefault();\n\tshowLoader(loaderContainer);\n\tconst form = event.currentTarget;\n\tconst query = form.elements.query.value;\n\tif (query === \"\") {\n\t\tiziToast.error({\n\t\t\ttitle: \"Error\",\n\t\t\tmessage: \"Please enter a search term\",\n\t\t});\n\t}\n\n\tfetchImage(query)\n\t\t.then(data => {\n\t\t\tif (data.hits.length === 0) {\n\t\t\t\tiziToast.error({\n\t\t\t\t\ttitle: \"Error\",\n\t\t\t\t\tmessage:\n\t\t\t\t\t\t\"Sorry, there are no images matching your search query. Please try again!\",\n\t\t\t\t});\n\t\t\t\tgallery.innerHTML = \"\";\n\t\t\t} else showImagesCards(data.hits);\n\t\t\thideLoader(loaderContainer);\n\t\t})\n\t\t.catch(() => {\n\t\t\tiziToast.error({\n\t\t\t\ttitle: \"Error\",\n\t\t\t\tmessage: \"Failed to fetch images. Please try again later.\",\n\t\t\t});\n\t\t})\n\t\t.finally(() => {\n\t\t\tsearchForm.reset();\n\t\t});\n}\n\nfunction fetchImage(value) {\n\tconst urlParams = new URLSearchParams({\n\t\tkey: API_KEY,\n\t\tq: value,\n\t\timage_type: \"photo\",\n\t\torientation: \"horizontal\",\n\t\tsafesearch: true,\n\t\tper_page: 9,\n\t});\n\n\treturn fetch(`${BASE_URL}?${urlParams}`).then(resp => {\n\t\tif (!resp.ok) {\n\t\t\tthrow new Error(resp.statusText);\n\t\t}\n\t\treturn resp.json();\n\t});\n}\nfunction showImagesCards(images) {\n\tconst markup = images\n\t\t.map(\n\t\t\t({\n\t\t\t\twebformatURL,\n\t\t\t\ttags,\n\t\t\t\tlikes,\n\t\t\t\tviews,\n\t\t\t\tcomments,\n\t\t\t\tdownloads,\n\t\t\t\tlargeImageURL,\n\t\t\t}) => `\n    \n      <div class=\"image-card\">\n      <a href = \"${largeImageURL}\" ><img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n      <div class=\"image-stats\">\n        <div class=\"stat-item\">\n          <p class=\"stat-label\">Likes:</p>\n          <p class=\"stat-value\">${likes}</p>\n        </div>\n        <div class=\"stat-item\">\n          <p class=\"stat-label\">Views:</p>\n          <p class=\"stat-value\">${views}</p>\n        </div>\n        <div class=\"stat-item\">\n          <p class=\"stat-label\">Comments:</p>\n          <p class=\"stat-value\">${comments}</p>\n        </div>\n        <div class=\"stat-item\">\n          <p class=\"stat-label\">Downloads:</p>\n          <p class=\"stat-value\">${downloads}</p>\n        </div>\n      </div>\n    </div>\n    `,\n\t\t)\n\t\t.join(\"\");\n\tgallery.innerHTML = markup;\n\tconst lightbox = new SimpleLightbox(\".gallery a\", {\n\t\tcaptionsData: \"alt\",\n\t\tcaptionDelay: 250,\n\t});\n\n\tlightbox.refresh();\n}\n\nfunction showLoader(loaderContainer) {\n\tloaderContainer.style.display = \"flex\";\n}\n\nfunction hideLoader(loaderContainer) {\n\tloaderContainer.style.display = \"none\";\n}\n"],"names":["BASE_URL","API_KEY","searchForm","gallery","loaderContainer","handleSearch","hideLoader","event","showLoader","query","iziToast","fetchImage","data","showImagesCards","value","urlParams","resp","images","markup","webformatURL","tags","likes","views","comments","downloads","largeImageURL","SimpleLightbox"],"mappings":"6vBAKA,MAAMA,EAAW,2BACXC,EAAU,qCACVC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAkB,SAAS,cAAc,mBAAmB,EAElEF,EAAW,iBAAiB,SAAUG,CAAY,EAClDC,EAAWF,CAAe,EAE1B,SAASC,EAAaE,EAAO,CAC5BA,EAAM,eAAc,EACpBC,EAAWJ,CAAe,EAE1B,MAAMK,EADOF,EAAM,cACA,SAAS,MAAM,MAC9BE,IAAU,IACbC,EAAS,MAAM,CACd,MAAO,QACP,QAAS,4BACZ,CAAG,EAGFC,EAAWF,CAAK,EACd,KAAKG,GAAQ,CACTA,EAAK,KAAK,SAAW,GACxBF,EAAS,MAAM,CACd,MAAO,QACP,QACC,0EACN,CAAK,EACDP,EAAQ,UAAY,IACdU,EAAgBD,EAAK,IAAI,EAChCN,EAAWF,CAAe,CAC7B,CAAG,EACA,MAAM,IAAM,CACZM,EAAS,MAAM,CACd,MAAO,QACP,QAAS,iDACb,CAAI,CACJ,CAAG,EACA,QAAQ,IAAM,CACdR,EAAW,MAAK,CACnB,CAAG,CACH,CAEA,SAASS,EAAWG,EAAO,CAC1B,MAAMC,EAAY,IAAI,gBAAgB,CACrC,IAAKd,EACL,EAAGa,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,CACZ,CAAE,EAED,OAAO,MAAM,GAAGd,KAAYe,GAAW,EAAE,KAAKC,GAAQ,CACrD,GAAI,CAACA,EAAK,GACT,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEhC,OAAOA,EAAK,MACd,CAAE,CACF,CACA,SAASH,EAAgBI,EAAQ,CAChC,MAAMC,EAASD,EACb,IACA,CAAC,CACA,aAAAE,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,cAAAC,CACJ,IAAS;AAAA;AAAA;AAAA,mBAGUA,6BAAyCN,WAAsBC;AAAA;AAAA;AAAA;AAAA,kCAIhDC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,KAK/B,EACA,KAAK,EAAE,EACTrB,EAAQ,UAAYe,EACH,IAAIQ,EAAe,aAAc,CACjD,aAAc,MACd,aAAc,GAChB,CAAE,EAEQ,QAAO,CACjB,CAEA,SAASlB,EAAWJ,EAAiB,CACpCA,EAAgB,MAAM,QAAU,MACjC,CAEA,SAASE,EAAWF,EAAiB,CACpCA,EAAgB,MAAM,QAAU,MACjC"}